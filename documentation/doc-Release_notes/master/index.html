<!DOCTYPE html>
<html lang="en-US">
  <head>

    
    <meta charset="UTF-8">
    
    <title>Release notes | Forklift Documentation</title>
    <!-- # Opengraph protocol properties: https://ogp.me/ -->
    <meta name="author" content="Forklift documentation team" >
    <meta property="og:type" content="article" >
    <meta name="twitter:card" content="summary">
    <meta name="keywords" content="" >
    <meta property="og:type" content="website">
    <meta property="og:image" content="">
    <meta property="og:article:author" content="Forklift documentation team" >
    <meta property="og:article:published_time" content="2022-01-16 18:26:23 -0600" >
    <meta name="twitter:title" content="Release notes | Forklift Documentation">
    <meta name="twitter:description" content="Migrating VMware virtual machines to KubeVirt">

    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Release notes | Forklift Documentation</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Release notes" />
<meta name="author" content="Forklift documentation team" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Migrating VMware virtual machines to KubeVirt" />
<meta property="og:description" content="Migrating VMware virtual machines to KubeVirt" />
<meta property="og:site_name" content="Forklift Documentation" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Release notes" />
<meta name="twitter:site" content="@konveyor_io" />
<meta name="twitter:creator" content="@Forklift documentation team" />
<script type="application/ld+json">
{"url":"/documentation/doc-Release_notes/master/","author":{"@type":"Person","name":"Forklift documentation team"},"@type":"WebPage","description":"Migrating VMware virtual machines to KubeVirt","headline":"Release notes","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/img/forklift-logo-darkbg.svg"},"name":"Forklift documentation team"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=c35534d584bea736bfb5eb0abda50ee5b5f2dda9">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png">
  </head>
  <body>
    <header class="page-header">
        
          <a href="/"><img src="/assets/img/forklift-logo-darkbg.svg" alt="Forklift Documentation" width="200" /></a><br>
        
      
        <a href="https://github.com/konveyor/forklift-documentation" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="Release notes">Release notes</h1>
<div id="toc" class="toc">
<div id="toctitle"></div>
<ul class="sectlevel1">
<li><a href="#rn-22_forklift">Forklift 2.2</a>
<ul class="sectlevel2">
<li><a href="#technical-changes-22_forklift">Technical changes</a></li>
<li><a href="#new-features-and-enhancements-22_forklift">New features and enhancements</a></li>
<li><a href="#known-issues-22_forklift">Known issues</a></li>
</ul>
</li>
<li><a href="#rn-21_forklift">Forklift 2.1</a>
<ul class="sectlevel2">
<li><a href="#technical-changes-21_forklift">Technical changes</a></li>
<li><a href="#new-features-and-enhancements-21_forklift">New features and enhancements</a></li>
<li><a href="#known-issues-21_forklift">Known issues</a></li>
</ul>
</li>
<li><a href="#rn-20_forklift">Forklift 2.0</a>
<ul class="sectlevel2">
<li><a href="#new-features-and-enhancements-20_forklift">New features and enhancements</a></li>
<li><a href="#known-issues-20_forklift">Known issues</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="rn-22_forklift">Forklift 2.2</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can migrate virtual machines (VMs) from VMware vSphere or oVirt to KubeVirt with  Forklift.</p>
</div>
<div class="paragraph">
<p>The release notes describe technical changes, new features and enhancements, and known issues.</p>
</div>
<div class="sect2">
<h3 id="technical-changes-22_forklift">Technical changes</h3>
<div class="paragraph">
<p>This release has the following technical changes:</p>
</div>
<div class="paragraph">
<div class="title">Setting the precopy time interval for warm migration</div>
<p>You can set the time interval between snapshots taken during the precopy stage of warm migration.</p>
</div>
</div>
<div class="sect2">
<h3 id="new-features-and-enhancements-22_forklift">New features and enhancements</h3>
<div class="paragraph">
<p>This release has the following features and improvements:</p>
</div>
<div class="paragraph">
<div class="title">Creating validation rules</div>
<p>You can create custom validation rules to check the suitability of VMs for migration. Validation rules are based on the VM attributes collected by the <code>Provider Inventory</code> service and written in <a href="https://www.openpolicyagent.org/docs/latest/policy-language/">Rego</a>, the Open Policy Agent native query language.</p>
</div>
<div class="paragraph">
<div class="title">Downloading logs by using the web console</div>
<p>You can download logs for a migration plan or a migrated VM by using the Forklift web console.</p>
</div>
<div class="paragraph">
<div class="title">Duplicating a migration plan by using the web console</div>
<p>You can duplicate a migration plan by using the web console, including its VMs, mappings, and hooks, in order to edit the copy and run as a new migration plan.</p>
</div>
<div class="paragraph">
<div class="title">Archiving a migration plan by using the web console</div>
<p>You can archive a migration plan by using the MTV web console. Archived plans can be viewed or duplicated. They cannot be run, edited, or unarchived.</p>
</div>
</div>
<div class="sect2">
<h3 id="known-issues-22_forklift">Known issues</h3>
<div class="paragraph">
<p>This release has the following known issues:</p>
</div>
<div class="paragraph">
<div class="title">Certain Validation service issues do not block migration</div>
<p>Certain <code>Validation</code> service issues, which are marked as <code>Critical</code> and display the assessment text, <code>The VM will not be migrated</code>, do not block migration. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2025977"><strong>BZ#2025977</strong></a>)</p>
</div>
<div class="paragraph">
<p>The following <code>Validation</code> service assessments do not block migration:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Issues that do not block migration</caption>
<colgroup>
<col style="width: 66.6666%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Assessment</th>
<th class="tableblock halign-left valign-top">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The disk interface type is not supported by OpenShift Virtualization (only sata, virtio_scsi and virtio interface types are currently supported).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migrated VM will have a virtio disk if the source interface is not recognized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The NIC interface type is not supported by OpenShift Virtualization (only e1000, rtl8139 and virtio interface types are currently supported).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migrated VM will have a virtio NIC if the source interface is not recognized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VM is using a vNIC profile configured for host device passthrough, which is not currently supported by OpenShift Virtualization.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migrated VM will have an SR-IOV NIC. The destination network must be set up correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">One or more of the VM&#8217;s disks has an illegal or locked status condition.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migration will proceed but the disk transfer is likely to fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VM has a disk with a storage type other than <code>image</code>, and this is not currently supported by OpenShift Virtualization.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migration will proceed but the disk transfer is likely to fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VM has one or more snapshots with disks in ILLEGAL state. This is not currently supported by OpenShift Virtualization.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migration will proceed but the disk transfer is likely to fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VM has USB support enabled, but USB devices are not currently supported by OpenShift Virtualization.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migrated VM will not have USB devices.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VM is configured with a watchdog device, which is not currently supported by OpenShift Virtualization.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migrated VM will not have a watchdog device.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">The VM&#8217;s status is not <code>up</code> or <code>down</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migration will proceed but it might hang if the VM cannot be powered off.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<div class="title">QEMU guest agent is not installed on migrated VMs</div>
<p>The QEMU guest agent is not installed on migrated VMs. Workaround: Install the QEMU guest agent with a post-migration hook. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2018062"><strong>BZ#2018062</strong></a>)</p>
</div>
<div class="paragraph">
<div class="title">Missing resource causes error message in current.log file</div>
<p>If a resource does not exist, for example, if the <code>virt-launcher</code> pod does not exist because the migrated VM is powered off, its log is unavailable.</p>
</div>
<div class="paragraph">
<p>The following error appears in the missing resource&#8217;s <code>current.log</code> file when it is downloaded from the web console or created with the <code>must-gather</code> tool: <code>error: expected 'logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER]'.</code> (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2023260"><strong>BZ#2023260</strong></a>)</p>
</div>
<div class="paragraph">
<div class="title">Importer pod log is unavailable after warm migration</div>
<p>Retaining the <code>Importer</code> pod for debug purposes causes warm migration to hang during the precopy stage. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2016290"><strong>BZ#2016290</strong></a>)</p>
</div>
<div class="paragraph">
<p>As a temporary workaround, the <code>Importer</code> pod is removed at the end of the precopy stage so that the precopy succeeds. However, this means that the <code>Importer</code> pod log is not retained after warm migration is complete. You can only view the <code>Importer</code> pod log by using the <code>oc logs -f &lt;cdi-importer_pod&gt;</code> command during the precopy stage.</p>
</div>
<div class="paragraph">
<p>This issue only affects the <code>Importer</code> pod log and warm migration. Cold migration and the <code>virt-v2v</code> logs are not affected.</p>
</div>
<div class="paragraph">
<div class="title">Deleting migration plan does not remove temporary resources.</div>
<p>Deleting a migration plan does not remove temporary resources such as <code>Importer</code> pods, <code>Conversion</code> pods, config maps, secrets, failed VMs and data volumes. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2018974"><strong>BZ#2018974</strong></a>) You must archive a migration plan before deleting it in order to clean up the temporary resources.</p>
</div>
<div class="paragraph">
<div class="title">Unclear error status message for VM with no operating system</div>
<p>The error status message for a VM with no operating system on the <strong>Migration plan details</strong> page of the web console does not describe the reason for the failure. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2008846"><strong>BZ#2008846</strong></a>)</p>
</div>
<div class="paragraph">
<div class="title">Network, storage, and VM referenced by name in the Plan CR are not displayed in the web console.</div>
<p>If a Plan CR references storage, network, or VMs by name instead of by ID, the resources do not appear in the Forklift web console. The migration plan cannot be edited or duplicated. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1986020"><strong>BZ#1986020</strong></a>)</p>
</div>
<div class="paragraph">
<div class="title">Log archive file includes logs of a deleted migration plan or VM</div>
<p>If you delete a migration plan and then run a new migration plan with the same name or if you delete a migrated VM and then remigrate the source VM, the log archive file created by the Forklift web console might include the logs of the deleted migration plan or VM. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2023764"><strong>BZ#2023764</strong></a>)</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rn-21_forklift">Forklift 2.1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can migrate virtual machines (VMs) from VMware vSphere or oVirt to KubeVirt with  Forklift.</p>
</div>
<div class="paragraph">
<p>The release notes describe new features and enhancements, known issues, and technical changes.</p>
</div>
<div class="sect2">
<h3 id="technical-changes-21_forklift">Technical changes</h3>
<div class="paragraph">
<div class="title">VDDK image added to <code>HyperConverged</code> custom resource</div>
<p>The VMware Virtual Disk Development Kit (VDDK) SDK image must be added to the <code>HyperConverged</code> custom resource. Before this release, it was referenced in the <code>v2v-vmware</code> config map.</p>
</div>
</div>
<div class="sect2">
<h3 id="new-features-and-enhancements-21_forklift">New features and enhancements</h3>
<div class="paragraph">
<p>This release adds the following features and improvements.</p>
</div>
<div class="paragraph">
<div class="title">Cold migration from oVirt</div>
<p>You can perform a cold migration of VMs from oVirt.</p>
</div>
<div class="paragraph">
<div class="title">Migration hooks</div>
<p>You can create migration hooks to run Ansible playbooks or custom code before or after migration.</p>
</div>
<div class="paragraph">
<div class="title">Filtered <code>must-gather</code> data collection</div>
<p>You can specify options for the <code>must-gather</code> tool that enable you to filter the data by namespace, migration plan, or VMs.</p>
</div>
<div class="paragraph">
<div class="title">SR-IOV network support</div>
<p>You can migrate VMs with a single root I/O virtualization (SR-IOV) network interface if the KubeVirt environment has an SR-IOV network.</p>
</div>
</div>
<div class="sect2">
<h3 id="known-issues-21_forklift">Known issues</h3>
<div class="paragraph">
<div class="title">QEMU guest agent is not installed on migrated VMs</div>
<p>The QEMU guest agent is not installed on migrated VMs. Workaround: Install the QEMU guest agent with a post-migration hook. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2018062"><strong>BZ#2018062</strong></a>)</p>
</div>
<div class="paragraph">
<div class="title">Disk copy stage does not progress</div>
<p>The disk copy stage of a oVirt VM does not progress and the Forklift web console does not display an error message. <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1990596">(<strong>BZ#1990596</strong>)</a></p>
</div>
<div class="paragraph">
<p>The cause of this problem might be one of the following conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The storage class does not exist on the target cluster.</p>
</li>
<li>
<p>The VDDK image has not been added to the <code>HyperConverged</code> custom resource.</p>
</li>
<li>
<p>The VM does not have a disk.</p>
</li>
<li>
<p>The VM disk is locked.</p>
</li>
<li>
<p>The VM time zone is not set to UTC.</p>
</li>
<li>
<p>The VM is configured for a USB device.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To disable USB devices, see <a href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.4/html-single/virtual_machine_management_guide/index#sect-Configuring_USB_Devices">Configuring USB Devices</a> in the Red Hat Virtualization documentation.</p>
</div>
<div class="paragraph">
<p>To determine the cause:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Workloads</strong> &#8594; <strong>Virtualization</strong> in the OKD web console.</p>
</li>
<li>
<p>Click the <strong>Virtual Machines</strong> tab.</p>
</li>
<li>
<p>Select a virtual machine to open the <strong>Virtual Machine Overview</strong> screen.</p>
</li>
<li>
<p>Click <strong>Status</strong> to view the status of the virtual machine.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">VM time zone must be UTC with no offset</div>
<p>The time zone of the source VMs must be UTC with no offset. You can set the time zone to <code>GMT Standard Time</code> after first assessing the potential impact on the workload. <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1993259">(<strong>BZ#1993259</strong>)</a></p>
</div>
<div class="paragraph">
<div class="title">oVirt resource UUID causes a "Provider not found" error</div>
<p>If a oVirt resource UUID is used in a <code>Host</code>, <code>NetworkMap</code>, <code>StorageMap</code>, or <code>Plan</code> custom resource (CR), a "Provider not found" error is displayed.</p>
</div>
<div class="paragraph">
<p>You must use the resource name. <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1994037">(<strong>BZ#1994037</strong>)</a></p>
</div>
<div class="paragraph">
<div class="title">Same oVirt resource name in different data centers causes ambiguous reference</div>
<p>If a oVirt resource name is used in a <code>NetworkMap</code>, <code>StorageMap</code>, or <code>Plan</code> custom resource (CR) and if the same resource name exists in another data center, the <code>Plan</code> CR displays a critical "Ambiguous reference" condition. You must rename the resource or use the resource UUID in the CR.</p>
</div>
<div class="paragraph">
<p>In the web console, the resource name appears twice in the same list without a data center reference to distinguish them. You must rename the resource. <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1993089">(<strong>BZ#1993089</strong>)</a></p>
</div>
<div class="paragraph">
<div class="title">Snapshots are not deleted after warm migration</div>
<p>Snapshots are not deleted automatically after a successful warm migration of a VMware VM. You must delete the snapshots manually in VMware vSphere. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2001270"><strong>BZ#2001270</strong></a>)</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rn-20_forklift">Forklift 2.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can migrate virtual machines (VMs) from VMware vSphere with  Forklift.</p>
</div>
<div class="paragraph">
<p>The release notes describe new features and enhancements, known issues, and technical changes.</p>
</div>
<div class="sect2">
<h3 id="new-features-and-enhancements-20_forklift">New features and enhancements</h3>
<div class="paragraph">
<p>This release adds the following features and improvements.</p>
</div>
<div class="paragraph">
<div class="title">Warm migration</div>
<p>Warm migration reduces downtime by copying most of the VM data during a precopy stage while the VMs are running. During the cutover stage, the VMs are stopped and the rest of the data is copied.</p>
</div>
<div class="paragraph">
<div class="title">Cancel migration</div>
<p>You can cancel an entire migration plan or individual VMs while a migration is in progress. A canceled migration plan can be restarted in order to migrate the remaining VMs.</p>
</div>
<div class="paragraph">
<div class="title">Migration network</div>
<p>You can select a migration network for the source and target providers for improved performance. By default, data is copied using the VMware administration network and the OKD pod network.</p>
</div>
<div class="paragraph">
<div class="title">Validation service</div>
<p>The validation service checks source VMs for issues that might affect migration and flags the VMs with concerns in the migration plan.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The validation service is a Technology Preview feature only. Technology Preview features
are not supported with Red Hat production service level agreements (SLAs) and
might not be functionally complete. Red Hat does not recommend using them
in production. These features provide early access to upcoming product
features, enabling customers to test functionality and provide feedback during
the development process.</p>
</div>
<div class="paragraph">
<p>For more information about the support scope of Red Hat Technology Preview
features, see <a href="https://access.redhat.com/support/offerings/techpreview/" class="bare">https://access.redhat.com/support/offerings/techpreview/</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="known-issues-20_forklift">Known issues</h3>
<div class="paragraph">
<p>This section describes known issues and mitigations.</p>
</div>
<div class="paragraph">
<div class="title">QEMU guest agent is not installed on migrated VMs</div>
<p>The QEMU guest agent is not installed on migrated VMs. Workaround: Install the QEMU guest agent with a post-migration hook. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=2018062"><strong>BZ#2018062</strong></a>)</p>
</div>
<div class="paragraph">
<div class="title">Network map displays a "Destination network not found" error</div>
<p>If the network map remains in a <code>NotReady</code> state and the <code>NetworkMap</code> manifest displays a <code>Destination network not found</code> error, the cause is a missing network attachment definition. You must create a <a href="https://docs.openshift.com/container-platform/4.9/virt/virtual_machines/vm_networking/virt-attaching-vm-multiple-networks.html#virt-creating-network-attachment-definition">network attachment definition</a> for each additional destination network before you create the network map. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1971259"><strong>BZ#1971259</strong></a>)</p>
</div>
<div class="paragraph">
<div class="title">Warm migration gets stuck during third precopy</div>
<p>Warm migration uses changed block tracking snapshots to copy data during the precopy stage. The snapshots are created at one-hour intervals by default. When a snapshot is created, its contents are copied to the destination cluster. However, when the third snapshot is created, the first snapshot is deleted and the block tracking is lost. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1969894"><strong>BZ#1969894</strong></a>)</p>
</div>
<div class="paragraph">
<p>You can do one of the following to mitigate this issue:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start the cutover stage no more than one hour after the precopy stage begins so that only one internal snapshot is created.</p>
</li>
<li>
<p>Increase the snapshot interval in the <code>vm-import-controller-config</code> config map to <code>720</code> minutes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-terminal" data-lang="terminal">$ kubectl patch configmap/vm-import-controller-config \
  -n openshift-cnv -p '{"data": \
  {"warmImport.intervalMinutes": "720"}}'</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>

      <footer class="site-footer">
        
          <span class="site-footer-owner"><p align="center"><a href="https://github.com/konveyor/forklift-documentation">forklift-documentation</a> is maintained by <a href="https://github.com/konveyor">konveyor</a>.</p></span>
        
      </footer>
    </main>
  </body>
</html>
